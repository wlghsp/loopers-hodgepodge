// ================================================
// Colima Docker 환경에서 테스트 실행을 위한 설정
// ================================================
// 사용법: build.gradle.kts에 아래 내용 추가
//
// test {
//     finalizedBy jacocoTestReport
//     useJUnitPlatform()
//     jacoco {
//         enabled = true
//         destinationFile = file("${buildDir}/jacoco/test.exec")
//         includes = []
//         excludes = []
//     }
//
//     // Colima Docker 환경설정
//     environment "DOCKER_HOST", "unix://${System.getProperty("user.home")}/.colima/default/docker.sock"
//     environment "TESTCONTAINERS_RYUK_DISABLED", "true"
//     environment "TESTCONTAINERS_REUSE_ENABLE", "true"
//
//     systemProperty "testcontainers.docker.socket.override", "/var/run/docker.sock"
//
//     // 테스트 성능 향상을 위한 추가 설정
//     maxParallelForks = Runtime.runtime.availableProcessors().intdiv(2) ?: 1
//
//     // JVM 힙 크기 조정 (컨테이너 실행 시 메모리 부족 방지)
//     jvmArgs = ['-Xmx2g']
// }
// ================================================

// Kotlin DSL 버전 (build.gradle.kts용)
/*
test {
    finalizedBy(tasks.jacocoTestReport)
    useJUnitPlatform()

    configure<JacocoTaskExtension> {
        isEnabled = true
        destinationFile = file("${buildDir}/jacoco/test.exec")
        includes = listOf()
        excludes = listOf()
    }

    // Colima Docker 환경설정
    environment("DOCKER_HOST", "unix://${System.getProperty("user.home")}/.colima/default/docker.sock")
    environment("TESTCONTAINERS_RYUK_DISABLED", "true")
    environment("TESTCONTAINERS_REUSE_ENABLE", "true")

    systemProperty("testcontainers.docker.socket.override", "/var/run/docker.sock")

    // 테스트 성능 향상을 위한 추가 설정
    maxParallelForks = Runtime.getRuntime().availableProcessors() / 2

    // JVM 힙 크기 조정 (컨테이너 실행 시 메모리 부족 방지)
    jvmArgs = listOf("-Xmx2g")
}
*/
